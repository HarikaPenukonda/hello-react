{"ast":null,"code":"var _jsxFileName = \"/Users/harikapenukonda/Documents/GitHub/hello-react/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport fetch from './api/dataService';\nimport ReactTable from \"react-table-6\";\nimport \"react-table-6/react-table.css\";\nimport \"./App.css\";\nimport _ from 'lodash';\n\nfunction calculateResults(incomingData) {\n  // Calculate points per transaction\n  const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n  const pointsPerTransaction = incomingData.map(transaction => {\n    let points = 0;\n    let over100 = transaction.amt - 100;\n\n    if (over100 > 0) {\n      // A customer receives 2 points for every dollar spent over $100 in each transaction      \n      points += over100 * 2;\n    }\n\n    if (transaction.amt > 50) {\n      // plus 1 point for every dollar spent over $50 in each transaction\n      points += 50;\n    }\n\n    const month = new Date(transaction.transactionDt).getMonth();\n    return { ...transaction,\n      points,\n      month\n    };\n  });\n  let byCustomer = {};\n  let totalPointsByCustomer = {};\n  pointsPerTransaction.forEach(pointsPerTransaction => {\n    let {\n      custid,\n      name,\n      month,\n      points\n    } = pointsPerTransaction;\n\n    if (!byCustomer[custid]) {\n      byCustomer[custid] = [];\n    }\n\n    if (!totalPointsByCustomer[custid]) {\n      totalPointsByCustomer[name] = 0;\n    }\n\n    totalPointsByCustomer[name] += points;\n\n    if (byCustomer[custid][month]) {\n      byCustomer[custid][month].points += points;\n      byCustomer[custid][month].monthNumber = month;\n      byCustomer[custid][month].numTransactions++;\n    } else {\n      byCustomer[custid][month] = {\n        custid,\n        name,\n        monthNumber: month,\n        month: months[month],\n        numTransactions: 1,\n        points\n      };\n    }\n  });\n  let tot = [];\n\n  for (var custKey in byCustomer) {\n    byCustomer[custKey].forEach(cRow => {\n      tot.push(cRow);\n    });\n  } //console.log(\"byCustomer\", byCustomer);\n  //console.log(\"tot\", tot);\n\n\n  let totByCustomer = [];\n\n  for (custKey in totalPointsByCustomer) {\n    totByCustomer.push({\n      name: custKey,\n      points: totalPointsByCustomer[custKey]\n    });\n  }\n\n  return {\n    summaryByCustomer: tot,\n    pointsPerTransaction,\n    totalPointsByCustomer: totByCustomer\n  };\n}\n\nfunction App() {\n  const [transactionData, setTransactionData] = useState(null);\n  const columns = [{\n    Header: 'Customer',\n    accessor: 'name'\n  }, {\n    Header: 'Month',\n    accessor: 'month'\n  }, {\n    Header: \"# of Transactions\",\n    accessor: 'numTransactions'\n  }, {\n    Header: 'Reward Points',\n    accessor: 'points'\n  }];\n  const totalsByColumns = [{\n    Header: 'Customer',\n    accessor: 'name'\n  }, {\n    Header: 'Points',\n    accessor: 'points'\n  }];\n\n  function getIndividualTransactions(row) {\n    let byCustMonth = _.filter(transactionData.pointsPerTransaction, tRow => {\n      return row.original.custid === tRow.custid && row.original.monthNumber === tRow.month;\n    });\n\n    return byCustMonth;\n  }\n\n  useEffect(() => {\n    fetch().then(data => {\n      const results = calculateResults(data);\n      setTransactionData(results);\n    });\n  }, []);\n\n  if (transactionData == null) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  return transactionData == null ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, \"Points Rewards System Totals by Customer Months\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ReactTable, {\n    data: transactionData.summaryByCustomer,\n    defaultPageSize: 5,\n    columns: columns,\n    SubComponent: row => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 19\n        }\n      }, getIndividualTransactions(row).map(tran => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 32\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-8\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 31\n          }\n        }, \"Transaction Date:\"), \" \", tran.transactionDt, \" - \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 89\n          }\n        }, \"$\"), tran.amt, \" - \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 120\n          }\n        }, \"Points: \"), tran.points)));\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, \"Points Rewards System Totals By Customer\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ReactTable, {\n    data: transactionData.totalPointsByCustomer,\n    columns: totalsByColumns,\n    defaultPageSize: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  })))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/harikapenukonda/Documents/GitHub/hello-react/src/App.js"],"names":["React","useState","useEffect","fetch","ReactTable","_","calculateResults","incomingData","months","pointsPerTransaction","map","transaction","points","over100","amt","month","Date","transactionDt","getMonth","byCustomer","totalPointsByCustomer","forEach","custid","name","monthNumber","numTransactions","tot","custKey","cRow","push","totByCustomer","summaryByCustomer","App","transactionData","setTransactionData","columns","Header","accessor","totalsByColumns","getIndividualTransactions","row","byCustMonth","filter","tRow","original","then","data","results","tran"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport fetch from './api/dataService';\nimport ReactTable from \"react-table-6\";  \nimport \"react-table-6/react-table.css\" \nimport \"./App.css\";\nimport _ from 'lodash';\n\n\nfunction calculateResults(incomingData) {\n  // Calculate points per transaction\n\n  const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n  const pointsPerTransaction = incomingData.map(transaction=> {\n    let points = 0;\n    let over100 = transaction.amt - 100;\n    \n    if (over100 > 0) {\n      // A customer receives 2 points for every dollar spent over $100 in each transaction      \n      points += (over100 * 2);\n    }    \n    if (transaction.amt > 50) {\n      // plus 1 point for every dollar spent over $50 in each transaction\n      points += 50;      \n    }\n    const month = new Date(transaction.transactionDt).getMonth();\n    return {...transaction, points, month};\n  });\n               \n  let byCustomer = {};\n  let totalPointsByCustomer = {};\n  pointsPerTransaction.forEach(pointsPerTransaction => {\n    let {custid, name, month, points} = pointsPerTransaction;   \n    if (!byCustomer[custid]) {\n      byCustomer[custid] = [];      \n    }    \n    if (!totalPointsByCustomer[custid]) {\n      totalPointsByCustomer[name] = 0;\n    }\n    totalPointsByCustomer[name] += points;\n    if (byCustomer[custid][month]) {\n      byCustomer[custid][month].points += points;\n      byCustomer[custid][month].monthNumber = month;\n      byCustomer[custid][month].numTransactions++;      \n    }\n    else {\n      \n      byCustomer[custid][month] = {\n        custid,\n        name,\n        monthNumber:month,\n        month: months[month],\n        numTransactions: 1,        \n        points\n      }\n    }    \n  });\n  let tot = [];\n  for (var custKey in byCustomer) {    \n    byCustomer[custKey].forEach(cRow=> {\n      tot.push(cRow);\n    });    \n  }\n  //console.log(\"byCustomer\", byCustomer);\n  //console.log(\"tot\", tot);\n  let totByCustomer = [];\n  for (custKey in totalPointsByCustomer) {    \n    totByCustomer.push({\n      name: custKey,\n      points: totalPointsByCustomer[custKey]\n    });    \n  }\n  return {\n    summaryByCustomer: tot,\n    pointsPerTransaction,\n    totalPointsByCustomer:totByCustomer\n  };\n}\n\nfunction App() {\n  const [transactionData, setTransactionData] = useState(null);\n  \n  const columns = [\n    {\n      Header:'Customer',\n      accessor: 'name'      \n    },    \n    {\n      Header:'Month',\n      accessor: 'month'\n    },\n    {\n      Header: \"# of Transactions\",\n      accessor: 'numTransactions'\n    },\n    {\n      Header:'Reward Points',\n      accessor: 'points'\n    }\n  ];\n  const totalsByColumns = [\n    {\n      Header:'Customer',\n      accessor: 'name'      \n    },    \n    {\n      Header:'Points',\n      accessor: 'points'\n    }\n  ]\n\n  function getIndividualTransactions(row) {\n    let byCustMonth = _.filter(transactionData.pointsPerTransaction, (tRow)=>{    \n      return row.original.custid === tRow.custid && row.original.monthNumber === tRow.month;\n    });\n    return byCustMonth;\n  }\n\n  useEffect(() => { \n    fetch().then((data)=> {             \n      const results = calculateResults(data);      \n      setTransactionData(results);\n    });\n  },[]);\n\n  if (transactionData == null) {\n    return <div>Loading...</div>;   \n  }\n\n  return transactionData == null ?\n    <div>Loading...</div> \n      :    \n    <div>      \n      \n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-10\">\n            <h2>Points Rewards System Totals by Customer Months</h2>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-8\">\n            <ReactTable\n              data={transactionData.summaryByCustomer}\n              defaultPageSize={5}\n              columns={columns}\n              SubComponent={row => {\n                return (\n                  <div>\n                    \n                      {getIndividualTransactions(row).map(tran=>{\n                        return <div className=\"container\">\n                          <div className=\"row\">\n                            <div className=\"col-8\">\n                              <strong>Transaction Date:</strong> {tran.transactionDt} - <strong>$</strong>{tran.amt} - <strong>Points: </strong>{tran.points}\n                            </div>\n                          </div>\n                        </div>\n                      })}                                    \n\n                  </div>\n                )\n              }}\n              />             \n            </div>\n          </div>\n        </div>\n        \n        <div className=\"container\">    \n          <div className=\"row\">\n            <div className=\"col-10\">\n              <h2>Points Rewards System Totals By Customer</h2>\n            </div>\n          </div>      \n          <div className=\"row\">\n            <div className=\"col-8\">\n              <ReactTable\n                data={transactionData.totalPointsByCustomer}\n                columns={totalsByColumns}\n                defaultPageSize={5}                \n              />\n            </div>\n          </div>\n        </div>      \n    </div>\n  ;\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}